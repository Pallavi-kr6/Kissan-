import { createContext, useContext, useEffect, useMemo, useState } from 'react';

const I18nContext = createContext({ t: (k) => k, lang: 'en', setLang: () => {} });

const DICTS = {
  en: {
    app_title: 'Kissan+',
    nav_home: 'Home',
    nav_subsidy: 'Subsidy',
    nav_schemes: 'Schemes',
    nav_disease: 'Disease',
    schemes_hero_title: 'Government Schemes for Farmers',
    schemes_hero_sub: 'Explore key schemes that support income, credit, insurance, markets and infrastructure. Click a card to learn more.',
    learn_more: 'Learn more',
    // Home
    home_title: 'Welcome to Kissan+',
    home_sub: 'A simple assistant for farmers to find subsidies, latest schemes, and detect crop diseases.',
    home_b1: 'Check region-wise subsidy and mandi prices',
    home_b2: 'Browse latest government schemes',
    home_b3: 'Detect plant diseases from leaf images',
    // Subsidy
    subsidy_title: 'Subsidy & Prices',
    subsidy_label_state: 'Select State',
    subsidy_label_commodity: 'Enter Crop Name',
    subsidy_placeholder_commodity: 'e.g. Tomato',
    subsidy_cta: 'Fetch Subsidy Prices',
    subsidy_fetching: 'Fetching data...',
    subsidy_error: 'Failed to fetch data.',
    subsidy_modal_price: 'Modal Price:',
    subsidy_min_price: 'Min Price:',
    subsidy_max_price: 'Max Price:',
    subsidy_arrival_date: 'Arrival Date:',
    subsidy_state: 'State:',
    subsidy_variety: 'Variety:',
    // Disease
    disease_title: 'Disease Detection',
    disease_upload_label: 'Upload Leaf Image',
    disease_cta: 'Detect Disease',
    disease_analyzing: 'Analyzing image...',
    disease_err_upload: 'Please upload an image first.',
    disease_err_fail: 'Failed to detect disease.',
    disease_result_title: 'Diagnosis Result',
    disease_result_disease: 'Disease:',
    disease_result_suggestion: 'Suggestion:',
    // Generic
    loading: 'Loading...',
  },
  hi: {
    app_title: 'किसान+',
    nav_home: 'होम',
    nav_subsidy: 'सब्सिडी',
    nav_schemes: 'योजनाएँ',
    nav_disease: 'रोग',
    schemes_hero_title: 'किसानों के लिए सरकारी योजनाएँ',
    schemes_hero_sub: 'आय, ऋण, बीमा, बाजार और इंफ्रास्ट्रक्चर के लिए प्रमुख योजनाएँ देखें। अधिक जानने के लिए कार्ड पर क्लिक करें।',
    learn_more: 'और जानें',
    home_title: 'किसान+ में आपका स्वागत है',
    home_sub: 'सब्सिडी, नवीनतम योजनाएँ और पौधों के रोग पहचानने के लिए एक सरल सहायक।',
    home_b1: 'क्षेत्रवार सब्सिडी और मंडी भाव देखें',
    home_b2: 'नवीनतम सरकारी योजनाएँ ब्राउज़ करें',
    home_b3: 'पत्तियों की छवियों से रोग पहचानें',
    subsidy_title: 'सब्सिडी और कीमतें',
    subsidy_label_state: 'राज्य चुनें',
    subsidy_label_commodity: 'फसल का नाम दर्ज करें',
    subsidy_placeholder_commodity: 'जैसे टमाटर',
    subsidy_cta: 'सब्सिडी कीमतें प्राप्त करें',
    subsidy_fetching: 'डेटा प्राप्त किया जा रहा है...',
    subsidy_error: 'डेटा प्राप्त करने में विफल।',
    subsidy_modal_price: 'मोडल कीमत:',
    subsidy_min_price: 'न्यूनतम कीमत:',
    subsidy_max_price: 'अधिकतम कीमत:',
    subsidy_arrival_date: 'आगमन तिथि:',
    subsidy_state: 'राज्य:',
    subsidy_variety: 'किस्म:',
    disease_title: 'रोग पहचान',
    disease_upload_label: 'पत्ती की छवि अपलोड करें',
    disease_cta: 'रोग पहचानें',
    disease_analyzing: 'छवि का विश्लेषण हो रहा है...',
    disease_err_upload: 'कृपया पहले एक छवि अपलोड करें।',
    disease_err_fail: 'रोग पहचानने में विफल।',
    disease_result_title: 'निदान परिणाम',
    disease_result_disease: 'रोग:',
    disease_result_suggestion: 'सुझाव:',
    loading: 'लोड हो रहा है...',
  },
  mr: {
    app_title: 'किसान+',
    nav_home: 'मुख्यपृष्ठ',
    nav_subsidy: 'अनुदान',
    nav_schemes: 'योजना',
    nav_disease: 'रोग',
    schemes_hero_title: 'शेतकऱ्यांसाठी सरकारी योजना',
    schemes_hero_sub: 'उत्पन्न, कर्ज, विमा, बाजार आणि पायाभूत सुविधांसाठी प्रमुख योजना पहा. अधिक जाणून घेण्यासाठी कार्डवर क्लिक करा.',
    learn_more: 'अधिक जाणून घ्या',
    home_title: 'किसान+ मध्ये स्वागत आहे',
    home_sub: 'अनुदान, ताज्या योजना आणि पिकरोग ओळखण्यासाठी एक सोपा सहाय्यक.',
    home_b1: 'प्रदेशनिहाय अनुदान आणि बाजारभाव पहा',
    home_b2: 'ताज्या सरकारी योजना ब्राउझ करा',
    home_b3: 'पानांच्या प्रतिमांवरून रोग ओळखा',
    subsidy_title: 'अनुदान व किंमती',
    subsidy_label_state: 'राज्य निवडा',
    subsidy_label_commodity: 'पीकाचे नाव लिहा',
    subsidy_placeholder_commodity: 'उदा. टोमॅटो',
    subsidy_cta: 'अनुदान किंमती मिळवा',
    subsidy_fetching: 'माहिती आणली जात आहे...',
    subsidy_error: 'माहिती आणण्यात अयशस्वी.',
    subsidy_modal_price: 'मोडल किंमत:',
    subsidy_min_price: 'किमान किंमत:',
    subsidy_max_price: 'कमाल किंमत:',
    subsidy_arrival_date: 'आगमन तारीख:',
    subsidy_state: 'राज्य:',
    subsidy_variety: 'जाती:',
    disease_title: 'रोग ओळख',
    disease_upload_label: 'पानाची प्रतिमा अपलोड करा',
    disease_cta: 'रोग ओळखा',
    disease_analyzing: 'प्रतिमा विश्लेषित होत आहे...',
    disease_err_upload: 'कृपया आधी प्रतिमा अपलोड करा.',
    disease_err_fail: 'रोग ओळखण्यात अयशस्वी.',
    disease_result_title: 'निदान निकाल',
    disease_result_disease: 'रोग:',
    disease_result_suggestion: 'सूचना:',
    loading: 'लोड होत आहे...',
  },
  ta: {
    app_title: 'கிசான்+',
    nav_home: 'முகப்பு',
    nav_subsidy: 'உதவித்தொகை',
    nav_schemes: 'திட்டங்கள்',
    nav_disease: 'நோய்',
    schemes_hero_title: 'விவசாயிகளுக்கான அரசு திட்டங்கள்',
    schemes_hero_sub: 'வருமானம், கடன், காப்பீடு, சந்தை மற்றும் அடிப்படை வசதிகளுக்கான முக்கிய திட்டங்களை காணவும். மேலும் அறிய அட்டையை கிளிக் செய்யவும்.',
    learn_more: 'மேலும் அறிய',
    home_title: 'கிசான்+ வரவேற்கிறது',
    home_sub: 'உதவித்தொகை, சமீபத்திய திட்டங்கள் மற்றும் பயிர் நோய் கண்டறிதல் ஆகியவற்றிற்கான எளிய உதவியாளர்.',
    home_b1: 'பிராந்திய வாரியான உதவித்தொகை மற்றும் மண்டி விலை',
    home_b2: 'சமீபத்திய அரசு திட்டங்களை உலாவவும்',
    home_b3: 'இலை படங்களிலிருந்து நோய்களை கண்டறியவும்',
    subsidy_title: 'உதவித்தொகை & விலை',
    subsidy_label_state: 'மாநிலத்தைத் தேர்வு செய்க',
    subsidy_label_commodity: 'பயிர் பெயரை உள்ளிடுக',
    subsidy_placeholder_commodity: 'எ.கா. தக்காளி',
    subsidy_cta: 'உதவித்தொகை விலைகளை பெற',
    subsidy_fetching: 'தரவு பெறப்படுகிறது...',
    subsidy_error: 'தரவை பெற முடியவில்லை.',
    subsidy_modal_price: 'மாடல் விலை:',
    subsidy_min_price: 'குறைந்த விலை:',
    subsidy_max_price: 'அதிகபட்ச விலை:',
    subsidy_arrival_date: 'வருகை தேதி:',
    subsidy_state: 'மாநிலை:',
    subsidy_variety: 'வகை:',
    disease_title: 'நோய் கண்டறிதல்',
    disease_upload_label: 'இலையின் படத்தை பதிவேற்றவும்',
    disease_cta: 'நோயை கண்டறி',
    disease_analyzing: 'படம் பகுப்பாய்வு செய்யப்படுகிறது...',
    disease_err_upload: 'முதல் படத்தை பதிவேற்றவும்.',
    disease_err_fail: 'நோயை கண்டறிய இயலவில்லை.',
    disease_result_title: 'ஆய்வு முடிவு',
    disease_result_disease: 'நோய்:',
    disease_result_suggestion: 'பரிந்துரை:',
    loading: 'ஏற்றப்படுகிறது...',
  },
};

export function I18nProvider({ children }) {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'en');
  useEffect(() => { localStorage.setItem('lang', lang); }, [lang]);

  const t = useMemo(() => {
    const dict = DICTS[lang] || DICTS.en;
    return (key) => dict[key] || DICTS.en[key] || key;
  }, [lang]);

  const value = useMemo(() => ({ t, lang, setLang }), [t, lang]);
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  return useContext(I18nContext);
}


